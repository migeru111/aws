opensearchは主に３種類ある
- elasticSearch
  - 3種の親になる分散処理の検索エンジン。
  - v7.10までOSSだった。
  - 現在はelastic社の製品
- opensearch
  - elasticSerchをフォークして開発されたOSS
  - 現在もOSS
- opensearchService
  - AWSが提供するOSのフルマネージドサービス。
  - デプロイ、管理、スケールアウトが簡単になる。
  - opensearchServerLessなるサーバー無し版も提供されている

論理的構成要素
    index
        ドキュメントの集合
        rdbmsでいうところのデータベース
        ドキュメントをインデックスに登録することをインデックスするというらしい、、
    document
        データの最小単位
        json形式で保存される
        rdbmsでいうところのレコード
    field
        ドキュメントのkey
        rdbmsでいうところのカラム
    mapping
        indsxに投入されるドキュメントの構造と型を定義するもの
        rdbmsでいうところのスキーマ定義

物理的構成要素
    claster
        複数のノードを要素として持つ
        分散システム全体を指す
        オープンサーチ(OSS)のクラスターと、オープンサーチサービス（AWS）のドメインは同義
    
    node
        プロセスが動作する単一のサーバを指す
        基本的に一つのノードで一つのプロセスを動かす
            一つのノードで複数プロセスを動かすことは非推奨
    
    noderole
        ノードがクラスター内でどのような責任を持つか定義するもの
        各ノードに複数のロールを割り当てることができる
        明示的にロールを割り振らない場合、デフォルトのロールが適用される

    clasterManager
        クラスタ全体の運用を管理するノード
        具体的に
            - インデックスの作成と削除
            - クラスタへのノードの参加と離脱の監視
            - 各ノードのヘルスチェック
            - シャードの割り当て
        を行う
    
    clusterManagerEledible
        クラスタマネージャに障害が発生した際に代理でクラスタマネージャの権限を取得できる資格を持ったノード
    
    data
        クラスタ内でデータを保持し、検索、インデックス付けなどのデータ操作関連を行うノード
        他のノードタイプよりディスク容量を必要とする

    ingest
        ドキュメントをインデックスに保存する前処理を行うノード
        データの形式変更、不要な情報の削除、追加の情報付与を行う

    coordinating
        クラスターのhttpリクエスト、インデックス作成リクエスト、検索リクエストを処理するノード
        coordinatingノードが、clastermanger(elidgble),dataのロールを持っていない時cordinatingOnlyノードと呼ばれる
        COノードはデータノードとマスターノードをhttpリクエストのリソース要求から分離できるのでクラスタのパフォーマンスを上げることができる。

    shard
        インデックスを分割したもの
        プライマリシャードとレプリカシャードにわけられる
        プライマリシャードはオリジナルのデータを保持する
        レプリカシャードはプライマリシャードのデータを保持する
        レプリカシャードはプライマリシャードが使えなくなった場合に使用される
        これにより検索パフォーマンスが向上する。
        
        シャード数が増えると各プロセスがリソースを消費する
        このため全体的なシステムのオーバヘッドが増加する
        このためシャード数は適切に分割することが重要
        
        シャードサイズは10-50GBが推奨されている
        10-30は読込負荷が高い場合を推奨
        30-50は書き込み負荷が高い場合を推奨


検索周り
    uri検索
        uriとクエリパラメータを使って簡易的な検索ができる
        domain/{index}/_search{querystring}
        {querystring}={field}:{検索したい項目の値}
        で検索可能
        クエリパラメタにオプションはいくつか用意されている
        しかし複雑な検索は実施できない

    リクエストボディ検索
        uri検索に対して複雑なクエリを行う場合リクエストボディ検索を行う
        リクエストボディにOSドメイン固有言語（DSL）を記述してリクエストする
        